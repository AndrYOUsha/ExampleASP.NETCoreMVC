@model WebApplication3.Models.MovieViewModels.MoviesIndexData

@{ 
    ViewData["Title"] = "Movies list";
}

<div class="container">
    <h1 class="display-4">Welcome to movies page</h1>

    <form asp-action="Index" method="get">
        <div class="form-group">
            <p>
                Find by Title <input type="text" name="TitleString" class="col-2"/>
                
                Find by Genre <input type="text" name="GenreString" class="col-2"/>
                
                Find by Actor <input type="text" name="ActorString" class="col-2"/>
                
                <input type="submit" value="Search" class="btn btn-primary col-2" />
                
                <br />
                <a asp-action="Index">Back to full list</a>
            </p>
        </div>
    </form>
    
    <table class="table">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Movies.Single().Title)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Movies.Single().Genre)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Movies.Single().ReleaseDate)
                </th>
                <th>
                    Actors
                </th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Movies)
            {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Title)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Genre)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ReleaseDate)
                </td>
                <td>
                    @{
                        foreach (var actor in item.MovieActors)
                        {
                            @actor.Actor.FirstName @: @actor.Actor.LastName <br />
                        }
                    }
                </td>
            </tr>
            }
        </tbody>
    </table>
</div>
